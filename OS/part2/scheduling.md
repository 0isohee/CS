# 스케줄링 (Scheduling)

### 목적
멀티 프로세서 환경에서 모든 프로세스를 공평하게 실행하기 위함
1. 공평성
2. 효율성
3. 안정성
4. 반응시간 보장
5. 무한 연기 방지

### 스케줄러
프로세스를 스케줄링 하기 위한 Queue에는 세 가지 종류가 존재함.
1. Job Queue
   - 현재 시스템 내의 모든 프로세스의 집합
2. Ready Queue
   - 현재 메모리 내에 있으면서 CPU를 잡아서 실행되기를 기다리는 프로세스의 집합
3. Device Queue
   - Device I/O 작업을 대기하고 있는 프로세스 집합

### 단계
1. 장기 스케줄링
- 준비 큐에 어떤 프로세스를 넣을지 결정하여 메모리에 올라가는 프로세스 수를 조절
- 잡 스케줄링, admission 스케줄링 이라고도 함
- 현대에는 RTOS 많이 써서 잘 안씀

2. 중기 스케줄링
- 메모리에 로드된 프로세스 동적으로 조절 (Swapper/Swapping)
- 메모리에 프로세스가 많이 로드되면 Swap out해서 일부 프로세서를 메모리를 통째로 저장.
- 스왑 아웃 된 프로세스는 상태가 (ready -> suspended)가 중단상태로 됨.
- 준비 상태에서 swap out 인지, 대기 상태에서 swap out 인지로 구분됨

3. 단기 스케줄링
- 준비 큐에 있는 대기 상태의 프로세스 중 어떤 것을 running 할 지 결정
- 어떤 프로세스를 디스패치 할 지 결정함
- CPU 스케줄링이라고도 함.

### 스케줄링 알고리즘
CPU 스케줄러가 준비 큐에 있는 프로세스 중 어떤 프로세스를 실행시킬지 결정하는 데 사용함.

1. 비 선점형 알고리즘 : 실행중인 프로세스가 종료될 때까지 다른 프로세스 실행시킬 수 없음
   - FCFS (First Come First Served)
     - 준비 큐에 먼저 들어온 프로세스가 우선순위를 갖음
     - 준비 큐에 먼저 들어온 걸 먼저 실행
   - SJF (Shortest Job First)
     - 실행 시간이 짧은 프로세스가 우선순위를 갖음 (SJN (Next)이라고도 함)
     - 실행시간 짧은 것은 평균 대기 시간이 매우 짧지만, 실행 시간이 긴 프로세스는 대기 시간이 매우 길어질 수 있음.
   - HRRN (Highest Response Ratio Next)
 
2. 선점형 알고리즘
   - RR (Round Robin)
     - 프로세스 간 우선순위가 없다
     - 모든 프로세스를 순서대로 일정 시간동안 실행하고, 일정 시간을 초과하면 다른 프로세스를 실행함.
     - 일정 시간은 '시간 단위', '타임 퀸텀', '타임 슬라이스' 를 의미
     - 할당 시간이 지나면 프로세스는 선점 당하고 준비 큐에 맨 뒤에 가서 다시 줄을 섬
     - 콘텍스트 스위칭이 빈번하게 일어나기에 오버헤드가 크다는 단점이 있고, 모든 프로세스가 반복 수행되어 응답 속도가 빠르다는 장점 있음.
    
   - SRTF (Shortest Remaining Time First)
     - 준비 큐에서 가장 짧게 남은 프로세스를 우선 수행하는 알고리즘
     - 한 프로세스가 실행 중일때, 실행시간이 더 짧은 프로세스가 준비 큐에 들어오면 실행시간이 더 짧은게 CPU을 차지하게 됨.
     - 평균 대기 시간이 짧은 장점이 있고, 수행 시간이 긴 것은 기아 상태가 되기 쉬움.
   
   - Multi Level
     - 준비 큐를 목적에 따라 여러 개로 분리하여 사용하는 알고리즘
     - 각각의 우선순위가 있고, 각자 다른 스케줄링 알고리즘을 적용함
     - 여러 개의 큐는 foreground 큐(응답 숙도가 중요), background 큐(성능 중요)로 나뉨.
